@using BELibrary.Entity
@{
    var doctors = (List<Doctor>)ViewBag.Doctors ?? new List<Doctor>();
    var latestPosts = (List<Article>)ViewBag.LatestPosts ?? new List<Article>();

}

<section class="section section-search">
    <div class="container-fluid">
        <div class="banner-wrapper">
            <div class="banner-header text-center">
                <h1>TÌM KIẾM BÁC SĨ, ĐẶT LỊCH HẸN</h1>
                <p>Hãy đặt lịch để được bác sĩ thăm khám và theo dõi bệnh tình một cách tốt nhất.</p>
            </div>
            <div class="search-box">
                <form action="/doctor/search" method="post">
                    <div class="form-group search-info">
                        <input type="text" class="form-control" placeholder="Tìm kiếm khoa, tên bác sĩ, v.v." name="query">
                        <span class="form-text">Ex : Khoa nội tồng quát, Khoa ngoại thần kinh, v.v.</span>
                    </div>
                    <button type="submit" class="btn btn-primary search-btn mt-0"><i class="fas fa-search"></i> <span>Tìm kiếm</span></button>
                </form>
            </div>
        </div>
    </div>
</section>

<section class="section home-tile-section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-9 m-auto">
                <div class="section-header text-center">
                    <h2>Bạn đang tìm kiếm gì?</h2>
                </div>
                <div class="row">
                    <div class="col-lg-4 mb-3">
                        <div class="card text-center doctor-book-card">
                            <img src="~/Content/theme/img/doctors/doctor-07.jpg" alt="" class="img-fluid">
                            <div class="doctor-book-card-content tile-card-content-1">
                                <div>
                                    <h3 class="card-title mb-0">Đến gặp bác sĩ</h3>
                                    <a href="/doctor" class="btn book-btn1 px-3 py-2 mt-3" tabindex="0">Đặt ngay</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-3">
                        <div class="card text-center doctor-book-card">
                            <img src="~/Content/theme/img/img-pharmacy1.jpg" alt="" class="img-fluid">
                            <div class="doctor-book-card-content tile-card-content-1">
                                <div>
                                    <h3 class="card-title mb-0">Danh mục blog</h3>
                                    <a href="/article/index" class="btn book-btn1 px-3 py-2 mt-3" tabindex="0">Tìm ngay</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 mb-3">
                        <div class="card text-center doctor-book-card">
                            <img src="~/Content/theme/img/lab-image.jpg" alt="" class="img-fluid">
                            <div class="doctor-book-card-content tile-card-content-1">
                                <div>
                                    <h3 class="card-title mb-0">Bốc số khám bệnh</h3>
                                    @if (HospitalManagement.Handler.CookiesManage.Logined())
                                    {
                                        <a href="javascript:void(0);" onclick="pickNumber()" class="btn book-btn1 px-3 py-2 mt-3" tabindex="0">Lấy số ngay</a>
                                    }
                                    else
                                    {
                                        <a href="@Url.Action("Login", "Account")"  class="btn btn-primary px-3 py-2 mt-3" tabindex="0">Đăng nhập</a>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section section-specialities">
    <div class="container-fluid">
        <div class="section-header text-center">
            <h2>PHÒNG KHÁM VÀ CHUYÊN KHOA</h2>
            <p class="sub-title">Điều quan trọng là phải chăm sóc và theo dõi bệnh nhân, điều trị cho bệnh nhân một cách tốt nhất.</p>
        </div>
        <div class="row justify-content-center">
            <div class="col-md-9">

                <div class="specialities-slider slider">

                    <div class="speicality-item text-center">
                        <div class="speicality-img">
                            <img src="~/Content/theme/img/specialities/specialities-01.png" class="img-fluid" alt="Speciality">
                            <span><i class="fa fa-circle" aria-hidden="true"></i></span>
                        </div>
                        <p>Tiết niệu</p>
                    </div>

                    <div class="speicality-item text-center">
                        <div class="speicality-img">
                            <img src="~/Content/theme/img/specialities/specialities-02.png" class="img-fluid" alt="Speciality">
                            <span><i class="fa fa-circle" aria-hidden="true"></i></span>
                        </div>
                        <p>Thần kinh học</p>
                    </div>

                    <div class="speicality-item text-center">
                        <div class="speicality-img">
                            <img src="~/Content/theme/img/specialities/specialities-03.png" class="img-fluid" alt="Speciality">
                            <span><i class="fa fa-circle" aria-hidden="true"></i></span>
                        </div>
                        <p>Chỉnh hình</p>
                    </div>

                    <div class="speicality-item text-center">
                        <div class="speicality-img">
                            <img src="~/Content/theme/img/specialities/specialities-04.png" class="img-fluid" alt="Speciality">
                            <span><i class="fa fa-circle" aria-hidden="true"></i></span>
                        </div>
                        <p>Tim mạch</p>
                    </div>

                    <div class="speicality-item text-center">
                        <div class="speicality-img">
                            <img src="~/Content/theme/img/specialities/specialities-05.png" class="img-fluid" alt="Speciality">
                            <span><i class="fa fa-circle" aria-hidden="true"></i></span>
                        </div>
                        <p>Nha sĩ</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section section-doctor">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4">
                <div class="section-header ">
                    <h2>Đặt lịch khám bệnh của đây sẽ được những lợi ích gì?</h2>
                    <p>Lợi Ích Khi Đặt Lịch Khám Bệnh Qua Website Của Chúng Tôi </p>
                </div>
                <div class="about-content">
                    <p>
                        1. Tiết kiệm thời gian:
                        Đặt lịch trực tuyến giúp bạn dễ dàng chọn thời gian phù hợp nhất cho mình mà không cần phải gọi điện hay đến trực tiếp cơ sở y tế. Bạn có thể kiểm tra lịch của bác sĩ và đặt lịch ngay lập tức, tiết kiệm thời gian quý báu.
                    </p>
                    <p>
                        2. Dịch vụ chuyên nghiệp và tiện lợi:
                        Website của chúng tôi cung cấp nền tảng dễ sử dụng để bạn có thể quản lý các cuộc hẹn của mình. Bạn nhận được xác nhận lịch hẹn ngay lập tức qua email hoặc tin nhắn, cùng với các thông tin cần thiết về bác sĩ và cơ sở y tế.
                    </p>
                    <p>
                        3. Chọn lịch hẹn linh hoạt:
                        Với tính năng đặt lịch trực tuyến, bạn có thể chọn từ nhiều khoảng thời gian có sẵn để phù hợp với lịch trình cá nhân của mình. Điều này giúp bạn dễ dàng sắp xếp các cuộc hẹn mà không bị ảnh hưởng đến công việc hoặc các hoạt động khác.
                    </p>

                    <!-- Phần đọc thêm -->
                    <div id="additional-info" style="display: none; margin-top: 10px;">
                        <p>
                            <strong>Thông tin thêm:</strong><br>
                            - Đặt lịch khám bệnh qua website giúp bạn giảm thiểu thời gian chờ đợi. <br>
                            - Dễ dàng quản lý và thay đổi lịch hẹn khi cần thiết. <br>
                            - Nhận thông báo về lịch hẹn qua email và tin nhắn để không bỏ lỡ thời gian khám.
                        </p>
                    </div>

                    <a href="javascript:void(0);" id="toggle-read-more" onclick="toggleReadMore()">Đọc thêm...</a>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="doctor-slider slider">
                    @foreach (var doctor in doctors)
                    {
                        <div class="profile-widget" style="min-height: 600px;">
                            <div class="doc-img">
                                <a href="/doctor/detail?id=@doctor.Id">
                                    <img class="img-fluid" alt="User Image" src="@doctor.Avatar">
                                </a>
                                <a href="javascript:void(0)" class="fav-btn">
                                    <i class="far fa-bookmark"></i>
                                </a>
                            </div>
                            <div class="pro-content" style="min-height: 285px;">
                                <h3 class="title">
                                    <a href="/doctor/detail?id=@doctor.Id">@doctor.Name</a>
                                    <i class="fas fa-check-circle verified"></i>
                                </h3>
                                <p class="speciality">@doctor.Descriptions</p>
                                <div class="rating">
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <i class="fas fa-star filled"></i>
                                    <span class="d-inline-block average-rating">(4)</span>
                                </div>
                                <ul class="available-info">
                                    <li>
                                        <i class="fas fa-map-marker-alt"></i> @doctor.Address
                                    </li>
                                    <li>
                                        <i class="fa fa-dashboard"></i> @doctor.Faculty.Name
                                    </li>
                                </ul>
                            </div>
                            <div class="control">
                                <div class="row row-sm">
                                    <div class="col-6">
                                        <a href="/doctor/detail?id=@doctor.Id" class="btn view-btn">Xem hồ sơ</a>
                                    </div>
                                    <div class="col-6">
                                        <a href="javascript:void(0)" onclick="bookNow('@doctor.Id')" class="btn book-btn">Đặt ngay</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    function toggleReadMore() {
        const additionalInfo = document.getElementById("additional-info");
        const toggleLink = document.getElementById("toggle-read-more");

        if (additionalInfo.style.display === "none") {
            additionalInfo.style.display = "block";
            toggleLink.textContent = "Thu gọn";  // Đổi văn bản thành "Thu gọn"
        } else {
            additionalInfo.style.display = "none";
            toggleLink.textContent = "Đọc thêm...";  // Đổi văn bản trở lại
        }
    }
</script>


<section class="section section-features">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-5 features-img">
                <img src="~/Content/theme/img/features/feature.png" class="img-fluid" alt="Feature">
            </div>
            <div class="col-md-7">
                <div class="section-header">
                    <h2 class="mt-2">DỊCH VỤ TẠI PHÒNG KHÁM CỦA CHÚNG TÔI</h2>
                    <p>Đây là một số dịch vụ hiện có tại phòng khám của chúng tôi hiện nay.Chúng tôi rất mong quý khách hàng sẽ hài lòng.</p>
                </div>
                <div class="features-slider slider">

                    <div class="feature-item text-center">
                        <img src="~/Content/theme/img/features/feature-01.jpg" class="img-fluid" alt="Feature">
                        <p>Giường bệnh nhân</p>
                    </div>

                    <div class="feature-item text-center">
                        <img src="~/Content/theme/img/features/feature-02.jpg" class="img-fluid" alt="Feature">
                        <p>Phòng thử nghiệm</p>
                    </div>

                    <div class="feature-item text-center">
                        <img src="~/Content/theme/img/features/feature-03.jpg" class="img-fluid" alt="Feature">
                        <p>Kích điện</p>
                    </div>

                    <div class="feature-item text-center">
                        <img src="~/Content/theme/img/features/feature-04.jpg" class="img-fluid" alt="Feature">
                        <p>Phòng thí nghiệm</p>
                    </div>

                    <div class="feature-item text-center">
                        <img src="~/Content/theme/img/features/feature-05.jpg" class="img-fluid" alt="Feature">
                        <p>Phẩu thuật</p>
                    </div>

                    <div class="feature-item text-center">
                        <img src="~/Content/theme/img/features/feature-06.jpg" class="img-fluid" alt="Feature">
                        <p>Thuộc về y học</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section section-blogs">
    <div class="container-fluid">

        <div class="section-header text-center">
            <h2>BLOG & TIN TỨC</h2>
            <p class="sub-title">Điều quan trọng là được bác sĩ theo dõi và chăm sóc, chuẩn đoán những căn bệnh một cách kịp thời.</p>
        </div>

        <div class="row blog-grid-row">

            @foreach (var art in latestPosts)
            {
                <div class="col-md-6 col-lg-3 col-sm-12">
                    <div class="blog grid-blog">
                        <div class="blog-image">
                            <a href="/article/detail?id=@art.Id"><img class="img-fluid" src="@art.Image" alt="@art.Title"></a>
                        </div>
                        <div class="blog-content">
                            <ul class="entry-meta meta-item">
                                <li>
                                    <div class="post-author">
                                        <a href="/article/detail?id=@art.Id">
                                            <img src="~/Content/theme/img/doctors/doctor-thumb-01.jpg" alt="Post Author">
                                            <span>Tiến sĩ Nguyễn Trần Khánh Vân</span>
                                        </a>
                                    </div>
                                </li>
                                <li><i class="far fa-clock"></i> @art.CreatedDate.ToString("dddd 'tháng' MM 'năm' yyyy")</li>
                            </ul>
                            <h3 class="blog-title"><a href="/article/detail?id=@art.Id">@art.Title</a></h3>
                            <p class="mb-0">
                                @(art.Description.Length > 100 ? art.Description.Substring(0, 100) + "..." : art.Description)
                            </p>
                        </div>
                    </div>
                </div>

            }
        </div>
        <div class="view-all text-center">
            <a href="/article" class="btn btn-primary">Xem tất cả</a>
        </div>
    </div>
</section>

@section Scripts
{
    <script src="~/Content/theme/js/slick.js"></script>
    <script src="~/Content/theme/js/script.js"></script>
} 